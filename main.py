# -*- coding: utf-8 -*-
import asyncio
import logging
import sys
from aiogram.filters import CommandStart
from aiogram.types import Message
from dispatcher import dp, bot
from keyboards import start_keyboard
from peewee import *

db = SqliteDatabase('base.db')


class Person(Model):
    """–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å –≤ —Ç–µ–ª–µ–≥—Ä–∞–º–º –±–æ—Ç–µ"""
    name = CharField() # –∏–º—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
    peewee = CharField() # —Ñ–∞–º–∏–ª–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

    class Meta:
        database = db
        table_name = 'registered_users'


@dp.message(CommandStart())
async def command_start_handler(message: Message) -> None:
    """
    –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É `/start`.

    :param message: –°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    :return: None
    """
    text = ('üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –±–æ—Ç –¥–ª—è —É—á–µ—Ç–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –Ω–∞ —Ä–∞–±–æ—á–µ–º –º–µ—Å—Ç–µ!\n\n'
            '–≠—Ç–æ—Ç –±–æ—Ç –ø–æ–º–æ–≥–∞–µ—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–∞ —Ä–∞–±–æ—á–µ–º –º–µ—Å—Ç–µ –∏ —É–≤–µ–¥–æ–º–ª—è—Ç—å –∫–æ–ª–ª–µ–≥.\n\n'

            'üìå –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:\n'
            '‚úÖ "–ù–∞ —Ä–∞–±–æ—Ç–µ" ‚Äî –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏—Ö–æ–¥. –£–∫–∞–∂–∏—Ç–µ –≤–∞—à–∏ –§–ò–û –∏ –∞–¥—Ä–µ—Å –º–∞–≥–∞–∑–∏–Ω–∞ (–∏–∑ —Å–ø–∏—Å–∫–∞).\n'
            'üè† "–£—à—ë–ª" ‚Äî –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å —É—Ö–æ–¥.\n'
            'üìñ "–°–ø—Ä–∞–≤–∫–∞" ‚Äî –ø–æ–≤—Ç–æ—Ä–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ.\n\n'

            'üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è: –ü—Ä–∏ –æ—Ç–º–µ—Ç–∫–µ –ø—Ä–∏—Ö–æ–¥–∞ –∏–ª–∏ —É—Ö–æ–¥–∞ –±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–æ–±—â–∏—Ç –æ–± —ç—Ç–æ–º –≤ –æ–±—â–∏–π —á–∞—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤.\n'
            'üë• –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤: –î–æ—Å—Ç—É–ø–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–ö—Ç–æ –Ω–∞ —Ä–∞–±–æ—Ç–µ" –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–ø–∏—Å–∫–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö. \n'
            '‚ö†Ô∏è –í–∞–∂–Ω–æ: –î–æ—Å—Ç—É–ø –∫ –±–æ—Ç—É —Ç–æ–ª—å–∫–æ –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∫–æ–º–ø–∞–Ω–∏–∏.\n\n'

            ' –•–æ—Ä–æ—à–µ–≥–æ –¥–Ω—è! üòä')
    await bot.send_message(chat_id=message.chat.id, text=text, reply_markup=start_keyboard())


async def main() -> None:
    """
    –ó–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞.

    :return: None
    """

    await dp.start_polling(bot)


if __name__ == "__main__":
    logging.basicConfig(level=logging.INFO, stream=sys.stdout)
    asyncio.run(main())
